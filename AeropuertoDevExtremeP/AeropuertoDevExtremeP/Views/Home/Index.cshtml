@using AeropuertoDevExtremeP.Models

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/ssc/animate.css" />
    <link rel="stylesheet" href="~/Content/ssc/icomoon.css" />
    <link rel="stylesheet" href="~/Content/ssc/themify-icons.css" />
    <link rel="stylesheet" href="~/Content/ssc/bootstrap.css" />
    <link rel="stylesheet" href="~/Content/ssc/magnific-popup.css" />
    <link rel="stylesheet" href="~/Content/ssc/style.css" />
}

<div id="fh5co-wrapper">
    <div id="fh5co-page">
        <div class="container mt-5">
            <div class="text-white text-center p-4 rounded shadow"
                 style="width: 80%; margin: 0 auto; font-size: 2em; background-color: rgba(0, 0, 0, 0.5);">
                <h2 class="text-white">Vuelos</h2>
            </div>
        </div>
    </div>
</div>


@(Html.DevExtreme().DataGrid<Vuelo>()
                .DataSource(ds => ds.WebApi()
                    .Controller("Vuelo")
                    .LoadAction("Get")
                    .InsertAction("Post")
                    .UpdateAction("Put")
                    .DeleteAction("Delete")
                    .Key("vueloId")
                )
                .RemoteOperations(true)
                .Paging(p => p.PageSize(10))
                .FilterRow(f => f.Visible(true))
                .HeaderFilter(f => f.Visible(true))
                .GroupPanel(p => p.Visible(true))
                .Grouping(g => g.AutoExpandAll(false))
                .Editing(e => e
                    .Mode(GridEditMode.Popup)
                    .AllowAdding(true)
                    .AllowUpdating(true)
                    .AllowDeleting(true)
                    .UseIcons(true)
                    .StartEditAction(GridStartEditAction.DblClick)
                )
                .Columns(columns => {
                    columns.AddFor(m => m.vueloId);

                    columns.AddFor(m => m.Fecha_salida);

                    columns.AddFor(m => m.Fecha_Llegada);

                    columns.AddFor(m => m.avionId).Lookup(lookup => lookup
                        .DataSource(ds => ds.WebApi().Controller("Avion").LoadAction("Get").Key("avionId"))
                        .ValueExpr("avionId")
                        .DisplayExpr("Nombre")
                    );

                    columns.AddFor(m => m.Puerta_AbordajeId);

                    columns.AddFor(m => m.Precio);
                })
                .Summary(s => s
                    .TotalItems(totalItems => {
                        totalItems.AddFor(m => m.vueloId).SummaryType(SummaryType.Count);
                    })
                    .GroupItems(groupItems => {
                        groupItems.Add().SummaryType(SummaryType.Count);
                    })
                )
            )
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/Scripts/js2/jquery.min.js"></script>
    <script src="~/Scripts/js2/bootstrap.min.js"></script>
    <script src="~/Scripts/js2/jquery.easing.1.3.js"></script>
    <script src="~/Scripts/js2/jquery.waypoints.min.js"></script>
    <script src="~/Scripts/js2/jquery.stellar.min.js"></script>
    <script src="~/Scripts/js2/jquery.magnific-popup.min.js"></script>
    <script src="~/Scripts/js2/magnific-popup-options.js"></script>
    <script src="~/Scripts/js2/main.js"></script>
}
